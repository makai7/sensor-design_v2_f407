/**
 ******************************************************************************
 * @file    ov2640_regs.h
 * @brief   OV2640 Camera Sensor Register Configuration Arrays
 * @author  Generated for STM32F407 Project
 * @note    These are standard OV2640 initialization sequences for JPEG mode
 ******************************************************************************
 */

#ifndef __OV2640_REGS_H
#define __OV2640_REGS_H

#include <stdint.h>

/* OV2640 Register Structure */
typedef struct {
    uint8_t reg;    // Register address
    uint8_t val;    // Register value
} OV2640_Reg_t;

/* OV2640 SCCB (I2C) Address */
#define OV2640_SCCB_ADDR    0x60  // 7-bit address: 0x30, left shifted: 0x60

/* OV2640 Chip ID Registers */
#define OV2640_CHIPIDH      0x0A  // Should return 0x26
#define OV2640_CHIPIDL      0x0B  // Should return 0x42

/* DSP Register Bank Selection */
#define OV2640_DSP_RA_DLMT  0xFF  // 0xFF = DSP, 0x00 = Sensor

/* ============================================================
 * OV2640 Initialization Sequence: SVGA Mode Initialization
 * ============================================================ */
const OV2640_Reg_t OV2640_SVGA_Init[] = {
    {0xFF, 0x00}, // Select DSP register bank
    {0x2C, 0xFF},
    {0x2E, 0xDF},
    {0xFF, 0x01}, // Select Sensor register bank
    {0x3C, 0x32},
    {0x11, 0x00}, // Clock divider
    {0x09, 0x02},
    {0x04, 0x28},
    {0x13, 0xE5},
    {0x14, 0x48},
    {0x2C, 0x0C},
    {0x33, 0x78},
    {0x3A, 0x33},
    {0x3B, 0xFB},
    {0x3E, 0x00},
    {0x43, 0x11},
    {0x16, 0x10},
    {0x39, 0x92},
    {0x35, 0xDA},
    {0x22, 0x1A},
    {0x37, 0xC3},
    {0x23, 0x00},
    {0x34, 0xC0},
    {0x36, 0x1A},
    {0x06, 0x88},
    {0x07, 0xC0},
    {0x0D, 0x87},
    {0x0E, 0x41},
    {0x4C, 0x00},
    {0x48, 0x00},
    {0x5B, 0x00},
    {0x42, 0x03},
    {0x4A, 0x81},
    {0x21, 0x99},
    {0x24, 0x40},
    {0x25, 0x38},
    {0x26, 0x82},
    {0x5C, 0x00},
    {0x63, 0x00},
    {0x46, 0x22},
    {0x0C, 0x3C},
    {0x61, 0x70},
    {0x62, 0x80},
    {0x7C, 0x05},
    {0x20, 0x80},
    {0x28, 0x30},
    {0x6C, 0x00},
    {0x6D, 0x80},
    {0x6E, 0x00},
    {0x70, 0x02},
    {0x71, 0x94},
    {0x73, 0xC1},
    {0x3D, 0x34},
    {0x5A, 0x57},
    {0x12, 0x00}, // SVGA mode
    {0x17, 0x11},
    {0x18, 0x75},
    {0x19, 0x01},
    {0x1A, 0x97},
    {0x32, 0x36},
    {0x03, 0x0F},
    {0x37, 0x40},
    {0x4F, 0xBB},
    {0x50, 0x9C},
    {0x5A, 0x57},
    {0x6D, 0x80},
    {0x3D, 0x34},
    {0x39, 0x02},
    {0x35, 0x88},
    {0x22, 0x0A},
    {0x37, 0x40},
    {0x34, 0xA0},
    {0x06, 0x02},
    {0x0D, 0xB7},
    {0x0E, 0x01},
};

/* ============================================================
 * OV2640 JPEG Mode Configuration
 * ============================================================ */
const OV2640_Reg_t OV2640_JPEG_Init[] = {
    {0xFF, 0x00}, // DSP bank
    {0xE0, 0x04},
    {0xC0, 0xC8},
    {0xC1, 0x96},
    {0x86, 0x3D},
    {0x50, 0x89},
    {0x51, 0x90},
    {0x52, 0x2C},
    {0x53, 0x00},
    {0x54, 0x00},
    {0x55, 0x88},
    {0x57, 0x00},
    {0x5A, 0xA0},
    {0x5B, 0x78},
    {0x5C, 0x00},
    {0xD3, 0x04},
    {0xE0, 0x00},
};

/* ============================================================
 * OV2640 160x120 (QQVGA) JPEG Resolution
 * ============================================================ */
const OV2640_Reg_t OV2640_JPEG_QQVGA[] = {
    {0xFF, 0x01}, // Sensor bank
    {0x12, 0x40},
    {0x17, 0x11},
    {0x18, 0x43},
    {0x19, 0x00},
    {0x1A, 0x25},
    {0x32, 0x89},
    {0x37, 0xC0},
    {0x4F, 0xCA},
    {0x50, 0xA8},
    {0x5A, 0x23},
    {0x6D, 0x00},
    {0x3D, 0x38},
    {0xFF, 0x00}, // DSP bank
    {0xE0, 0x04},
    {0xC0, 0xC8},
    {0xC1, 0x96},
    {0x86, 0x3D},
    {0x50, 0x89},
    {0x51, 0x90},
    {0x52, 0x2C},
    {0x53, 0x00},
    {0x54, 0x00},
    {0x55, 0x88},
    {0x57, 0x00},
    {0x5A, 0x40},
    {0x5B, 0x30},
    {0x5C, 0x00},
    {0xD3, 0x04},
    {0xE0, 0x00},
};

/* ============================================================
 * OV2640 320x240 (QVGA) JPEG Resolution
 * ============================================================ */
const OV2640_Reg_t OV2640_JPEG_QVGA[] = {
    {0xFF, 0x01},
    {0x12, 0x40},
    {0x17, 0x11},
    {0x18, 0x43},
    {0x19, 0x00},
    {0x1A, 0x25},
    {0x32, 0x89},
    {0x37, 0xC0},
    {0x4F, 0xCA},
    {0x50, 0xA8},
    {0x5A, 0x23},
    {0x6D, 0x00},
    {0x3D, 0x38},
    {0xFF, 0x00},
    {0xE0, 0x04},
    {0xC0, 0xC8},
    {0xC1, 0x96},
    {0x86, 0x3D},
    {0x50, 0x89},
    {0x51, 0x90},
    {0x52, 0x2C},
    {0x53, 0x00},
    {0x54, 0x00},
    {0x55, 0x88},
    {0x57, 0x00},
    {0x5A, 0x50},
    {0x5B, 0x3C},
    {0x5C, 0x00},
    {0xD3, 0x04},
    {0xE0, 0x00},
};

/* Array sizes */
#define OV2640_SVGA_INIT_SIZE    (sizeof(OV2640_SVGA_Init) / sizeof(OV2640_Reg_t))
#define OV2640_JPEG_INIT_SIZE    (sizeof(OV2640_JPEG_Init) / sizeof(OV2640_Reg_t))
#define OV2640_JPEG_QQVGA_SIZE   (sizeof(OV2640_JPEG_QQVGA) / sizeof(OV2640_Reg_t))
#define OV2640_JPEG_QVGA_SIZE    (sizeof(OV2640_JPEG_QVGA) / sizeof(OV2640_Reg_t))

#endif /* __OV2640_REGS_H */
